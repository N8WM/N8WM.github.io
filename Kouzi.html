<!DOCTYPE html>
<html>
  <head>
    <title>Kouzi</title>
    <link href="https://fonts.googleapis.com/css?family=Josefin Slab" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Inconsolata" rel="stylesheet">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="N8WM.github.io/Behave.js"></script>
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
    <link rel="apple-touch-icon" href="/apple-touch-icon.png" />
    <link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png" />
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png" />
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-touch-icon-76x76.png" />
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png" />
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-touch-icon-120x120.png" />
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-touch-icon-144x144.png" />
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-touch-icon-152x152.png" />
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon-180x180.png" />
    <link rel="apple-touch-startup-image" href="/gthb.png" />
    <meta name="apple-mobile-web-app-title" content="Kouzi">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="viewport" content="width=device-width, user-scalable=no">
    <style>
      body {
        overflow: hidden;
        height: 100vh;
        -webkit-overflow-scrolling: auto;
      }
      
      #kouzi-top {
        width: 100%;
        position: fixed;
        background-color: white;
        border-bottom: solid lightgray 1px;
        z-index: 3;
        overflow: hidden;
      }
      
      #kouzi-top #title {
        font-family: "Josefin Slab", Georgia, Serif;
        font-size: 4vh;
        line-height: 5vh;
        color: #55f;
        z-index: 4;
      }
      
      .outer {
        position: absolute;
        overflow: hidden;
        top: 5vh;
        width: 100%;
        height: 95vh;
        -webkit-overflow-scrolling: auto;
      }
      
      .i-mainL {
        width: 100%;
        height: 100%;
        position: absolute;
        left: 0%;
        transition: 0.5s;
      }
      
      .i-mainL.triggered {
        left: -100%;
        transition: 0.5s;
      }
      
      .i-mainR {
        width: 100%;
        height: 100%;
        position: absolute;
        left: 100%;
        transition: 0.5s;
      }
      
      .i-mainR.triggered {
        left: 0%;
        transition: 0.5s;
      }
      
      .btn {
        background-color: lightgray;
      }
      
      .btn:active {
        outline: none;
      }
      
      .btn:focus {
        outline: none;
      }
      
      #txta {
        -webkit-appearance: none;
        width: 90%;
        height: 50%;
        border: 1px solid lightgray;
        border-left: none;
        border-top-right-radius: 5px;
        border-bottom-right-radius: 5px;
        font-size: 14px;
        font-family: 'Inconsolata', monospace;
        transition: 0.5s;
        float: left;
        overflow: auto;
        -webkit-overflow-scrolling: touch;
      }
      
      #txta:focus {
        outline: none;
        height: 70%;
        transition: 0.5s;
        #lnums {
          height: 70%;
          transition: 0.5s;
        }
      }
      
      #lnums {
        height: 50%;
        width: 10%;
        border: 1px solid lightgray;
        border-right: none;
        border-top-left-radius: 5px;
        border-bottom-left-radius: 5px;
        font-size: 14px;
        font-family: 'Inconsolata', monospace;
        transition: 0.5s;
        float: left;
        overflow: hidden;
      }
      
      #txta-container {
        width: 95%;
        height: 100%;
      }
      
      #frame {
        width: 95%;
        height: 70%;
        border: 1px solid lightgray;
        border-radius: 5px;
        overflow: hidden;
      }
      
      #frame iframe {
        width: 100%;
        height: 70%;
        border: none;
        overflow: auto;
      }
      
    </style>
  </head>
  <body id="container" onload="retrieve();addLineNumbers('txta', 'lnums');">
    <center>
      <div id="kouzi-top">
        <div id="title">
          <strong><i>Kouzi</i></strong>
        </div>
      </div>
      <div class="outer">
        <div class="i-mainR">
          <h1>Result</h1>
          <div id="frame"></div>
          <br><br>
          <button class="btn btn-lg i-mainL-btn" ontouchstart=""><span class="glyphicon glyphicon-pencil"></span>&nbsp;&nbsp;&nbsp;Edit</button>
        </div>
        <div class="i-mainL">
          <h1>Editor</h1>
          <div id="txta-container">
            <div id="lnums"></div>
            <textarea autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" id="txta" onkeyup="run();addLineNumbers('txta', 'lnums');"></textarea>
            <br><br>
            <button class="btn btn-lg i-mainR-btn" ontouchstart=""><span class="glyphicon glyphicon-eye-open"></span>&nbsp;&nbsp;&nbsp;Result</button>
          </div>
        </div>
      </div>
    </center>
    <script>
      function retrieve() {
        if (localStorage.getItem("htm") == null) {
          localStorage.setItem("htm", "enter code...");
        }
        document.getElementById("txta").value = localStorage.getItem("htm");
        document.getElementById("frame").innerHTML = "<iframe srcdoc='" + document.getElementById("txta").value + "'></iframe>";
      }
      function run() {
        document.getElementById("frame").innerHTML = "<iframe srcdoc='" + document.getElementById("txta").value + "'></iframe>";
        localStorage.setItem("htm", document.getElementById("txta").value);
      }
      $('.i-mainL-btn').on('click', function() {
        $('.i-mainL').toggleClass('triggered');
        $('.i-mainR').toggleClass('triggered');
      });
      $('.i-mainR-btn').on('click', function() {
        $('.i-mainR').toggleClass('triggered');
        $('.i-mainL').toggleClass('triggered');
      });
      var editor = new Behave({
        textarea: document.getElementById('txta'),
        tabSize: 2
      });
      function addLineNumbers(txta, div) {
        var text = document.getElementById(txta);
        var out = document.getElementById(div);
        out.innerHTML = "";
        for (num = 0; num < text.value.split("\n").length; num++) {
          out.innerHTML = out.innerHTML + (num + 1) + "<br>";
        }
      }
    </script>
  </body>
</html>
